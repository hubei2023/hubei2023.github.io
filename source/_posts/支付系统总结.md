---
title: 支付业务
---

### 1 支付系统业务

```
简单支付系统包含 收银台 收单 通道 账户 对账 计价 对应的公司-比如做滴滴 百度
```

```
复杂的-商户模式 路由  分润 出款 结算  分润 商户出入金费率 商户支付方式 币种 国家 等维度权限控制,具体根据产品定位  比如 易宝 等三方支付公司
```

##### 配置设计技巧

```
在设计配置的时候，可以设计一个默认配置 ，有另外配置优先走。 可以整体减少很多配置
```



#### 支付

```
必须同步
```



```sequence
用户-->业务系统:选择/消费商品
业务系统-->支付订单系统:下单
支付订单系统-->业务系统:收银台
业务系统-->用户:收银台
用户-->用户:选择支付方式并支付（后面的交互稍有区别）
通道-->支付订单系统:回调成功
支付订单系统-->支付订单系统:更新订单 加账户

```



#### 出款

### 参考技术架构

```
如果日订单在300W峰值左右
mysql  主从备 64c 5T 的物理机 业务写主 运营后台 对账
rocketMQ 
go语言 6 台 16c16G机器 
redis  单节点 。有待改进

系统主要有  订单 支付（收单+账户） 渠道 模式

支付方式主要有  银行卡  云闪付 微信支付分 支付宝

设计技术 分表 hash环分表 分布式id
```

### 数币支付

```sequence
用户-->业务系统:选择/消费商品
业务系统-->支付订单系统:下单
支付订单系统-->业务系统:收银台
业务系统-->用户:收银台
用户-->用户:选择支付方式并支付（后面的交互稍有区别）
通道-->支付订单系统:回调成功
支付订单系统-->支付订单系统:更新订单 加账户
```



```
数币支付 和法币支付 。最大的区别就是通道的通知结果和支付系统的订单号对不上。只能通过地址判断。
还有订单 存在多付 少付 问题。
```

